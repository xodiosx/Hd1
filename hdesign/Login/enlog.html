<!DOCTYPE html>
<html lang="en">
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
	
    <!-- Mobile Specific Metas
  ================================================== -->
    <meta name="viewport" content="width=device-width,minimum-scale=1, initial-scale=1, maximum-scale=1, user-scalable=1">
    
  <title>Login</title>
  <link rel = "stylesheet" href = "main.css">
<style>
        body {text-align: center;}
       
    </style>
    <link rel="stylesheet" href="style.css" />
<link rel="stylesheet" href="lod.css" />
</head>
<body>
<center>
<script src="jq.js"></script>
	  <script src="lody.js"></script>

    
    <!-- Script -->
   <div class="all">
      <div class="eyes-wrapper">
        <div class="eye">
          <div class="eyeball"></div>
        </div>
        <div class="eye">
          <div class="eyeball"></div>
        </div>
      </div>
    </div>
<div id="boxes">
<div style="top: 50%; left: 50%; display: none;" id="dialog" class="window"> 
<div id="san">
<a href="#" class="close agree"><img src="close-icon.png" width="35" style="float:right; margin-right: 25px; margin-top: -20px;"></a>
<img src="lod.gif" width="90%">
</div>
</div>
<div style="width: 100%; font-size: 32pt; color:#000; height: 1202px; display: none; opacity: 0.4;" id="mask"></div>
</div> 
  </div> 

  <div class = "login-container">
    <div id= "main">
		<div id="info">Hello</div>
      <h1>Sign In</h1>
     <input id = "name" type = "text" placeholder = "name"></input>
      	
      <input id = "email" type = "text" placeholder = "Email"></input>
      <input id = "password" type = "password" placeholder = "Password"></input>
      <button id = "submit">Submit</button>
      <p><span>or</span></p>
      <button id = "sign-up">Sign Up</button>
  
  </div>

    <div id = "create-acct">
      <h1>Create an Account</h1>
       <input id = "name-signup" type = "text" placeholder = "name"></input>	
      <input id = "email-signup" type = "text" placeholder = "Email"></input>
        	
      <input id = "confirm-email-signup" type = "email" placeholder = "Confirm Email"></input>
      <input id = "password-signup" type = "password" placeholder = "Password"></input>
      <input id = "confirm-password-signup" type = "password" placeholder = "Confirm Password"></input>
      <button id = "create-acct-btn">Create Account</button>
      <button id = "return-btn">Return to Login</button>
       
      
</div>
  </div>
        
        <input id="enterID" type="hidden"> 

        
        <input id="enterName" type="hidden"> 

       <div> 
        <input id="enterAge" type="hidden"> <br><br>
<button class ="lang" id="arabic">العربية</button>

<button class ="lang" id="logout">logout</button>
        
    </div>

   
    
</center>
    <script src="device-uuid.min.js"></script>

<script>


</script>
<script type="module">
var uuid = new DeviceUUID().get();

function getOS() {
  var userAgent = window.navigator.userAgent,
      platform = window.navigator.platform,
      macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
      windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
      iosPlatforms = ['iPhone', 'iPad', 'iPod'],
      os = null;

  if (macosPlatforms.indexOf(platform) !== -1) {
    os = 'Mac OS';
  } else if (iosPlatforms.indexOf(platform) !== -1) {
    os = 'iOS';
  } else if (windowsPlatforms.indexOf(platform) !== -1) {
    os = 'Windows';
  } else if (/Android/.test(userAgent)) {
    os = 'Android';
  } else if (!os && /Linux/.test(platform)) {
    os = 'Linux';
  }

  return os;
}






navigator.sayswho= (function(){
    var ua= navigator.userAgent;
    var tem; 
    var M= ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
    if(/trident/i.test(M[1])){
        tem=  /\brv[ :]+(\d+)/g.exec(ua) || [];
        return 'IE '+(tem[1] || '');
    }
    if(M[1]=== 'Chrome'){
        tem= ua.match(/\b(OPR|Edge)\/(\d+)/);
        if(tem!= null) return tem.slice(1).join(' ').replace('OPR', 'Opera');
    }
    M= M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];
    if((tem= ua.match(/version\/(\d+)/i))!= null) M.splice(1, 1, tem[1]);
    return M.join(' ');
})();

console.log(navigator.sayswho); // outputs: `Chrome 62`




  // Check for shareable device info
            var deviceFromUrl, locationFromUrl;
            var qs = window.location.search;
            if (qs.indexOf('?info=') > -1) {
                var urlParams = new URLSearchParams(qs);
                deviceFromUrl = JSON.parse(decodeURIComponent(urlParams.get('info')));
                locationFromUrl = decodeURIComponent(urlParams.get('location'));
            }



           

            // IP - Location
          

var xxx = document.getElementById("info");
            var ipLocProps = [];
            if (locationFromUrl) {
                
            } else {
                fetch('https://ipv4.myip.wtf/json').then(response => response.json()).then(function(data) {
                  

  
});
            }

                


let xxxx;
const response = await fetch('https://ipv4.myip.wtf/json').then(response => response.json()).then(data => {
    xxxx = data;
   })




 xxx.innerHTML = xxxx.YourFuckingLocation;



	


  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBIHYrQ9UDuniqixbgiwEKVvGekc24j_j8",
    authDomain: "xlogin1.firebaseapp.com",
    databaseURL: "https://xlogin1-default-rtdb.firebaseio.com",
    projectId: "xlogin1",
    storageBucket: "xlogin1.appspot.com",
    messagingSenderId: "694120584058",
    appId: "1:694120584058:web:8a6980c9d6ad2409147cc3",
    measurementId: "G-92FBT6BCXM"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);


        //THIS IS WHERE YOU PASTE THE CODE TO CONNECT TO YOUR OWN DATABASE
        //Copy and paste the CDN bit of code from your app that you created on Firebase.
        //The script tag above is already there, so careful not to have duplicate script tags.
        //After you've copied and pasted, just delete the unnecessary script tags. 
   

        import {getDatabase, ref, get, set, child, update, remove}
        from //Copy and Paste the URL from near the top of the CDN you pasted in from firebase
"https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";
        // (the one where you imported "initializeApp" from),
        //but change "firebase-app" to "firebase-database"
        

        const db = getDatabase();


var arabicbtn = document.querySelector("#arabic");

var logoutt = document.querySelector("#logout");
      

        var enterID = document.querySelector("#enterID");
        var enterName = document.querySelector("#enterName");
        var enterAge = document.querySelector("#enterAge");
        
  
        

        function InsertData() {
       enterID.value =signupnameIn.value;
enterAge.value =signupPasswordIn.value;
enterName.value =signupEmailIn.value;

  set(ref(db, "People/"+ enterID.value),{
                email: enterName.value,
                name: enterID.value,
                pass: enterAge.value
            })
            .then(()=>{
                alert("Data added successfully");
            })
            .catch((error)=>{
                alert(error);
            });
        }

        function FindData() {
            const dbref = ref(db);

            get(child(dbref, "People/" + findID.value))
            .then((snapshot)=>{
                if(snapshot.exists()){
                    findName.innerHTML = "email: " + snapshot.val().email;
                    findAge.innerHTML = "pass: " + snapshot.val().pass;
                } else {
                    alert("No data found");
                }
            })
            .catch((error)=>{
                alert(error)
            })
            
        }

        function UpdateData(){
enterID.value =signupnameIn.value;
enterAge.value =signupPasswordIn.value;
enterName.value =signupEmailIn.value;

            update(ref(db, "People/"+ enterID.value),{
                email: enterName.value,
                pass: enterAge.value
            })
            .then(()=>{
                alert("Data updated successfully");
            })
            .catch((error)=>{
                alert(error);
            });
        }

        function RemoveData(){
            remove(ref(db, "People/"+ enterID.value))
            .then(()=>{
                alert("Data deleted successfully");
            })
            .catch((error)=>{
                alert(error);
hode(); 
            });
        }
    
    
   
function arabic(){

alert ("العربية");

location=("index.html");

}
  
   


import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword,signOut } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";



import { signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";



const provider = new GoogleAuthProvider();



import {
  setPersistence,
  browserLocalPersistence,
  browserSessionPersistence,
  inMemoryPersistence
} from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";








const auth = getAuth(app);

const user = auth.currentUser;
let currentuser = null;


setPersistence(auth, browserLocalPersistence);



 currentuser = JSON.parse(localStorage.getItem("user"));
if (currentuser !== null){


}

if (user) {
  
//window.location=("../");
  // ...
} else {
  
if (currentuser !== null){
alert( "Welcome back " + currentuser.email);

window.location=("../");
}

}


 

arabicbtn.addEventListener('click', arabic);
logoutt.addEventListener('click', logout);

 
function Findb() {
            const dbref = ref(db);
show();
enterID.value =signupnameIn.value;

            get(child(dbref, "users/" + enterID.value))
            .then((snapshot)=>{
             if(snapshot.exists()){
                   alert("user already exist");

     hode(); 
return;
                     
                } else {
var uid3 = "" + enterID.value;
sessionStorage.setItem("uid3", JSON.stringify(uid3));
localStorage.setItem("uid3", JSON.stringify(uid3));
             createok();
     //alert("welcome");
hode(); 
                }
            })
            .catch((error)=>{
                alert(error)
hode(); 
            })
            
        }

function finduid() {
show();
            const dbref = ref(db);
enterID.value =nameInput.value;
var islogin = true;
 
if(emailInput.value == "" || passwordInput.value == "" || nameInput.value == "") {
    window.alert("Please fill out all required fields.");
    islogin = false;
hode(); 
  }

 if(islogin) {
            get(child(dbref, "uid/" + enterID.value))
            .then((snapshot)=>{
             if(snapshot.exists()){
                   

var uid = "uid" + snapshot.val().uuid;
var uid2 = "uid" + uuid;
//nameInput.value ="3" + uid;
var nameid = "" + snapshot.val().name;
var nameid2 = "" + nameInput.value;
var emailid = "" + snapshot.val().email;
var emailid2 = "" + emailInput.value;
//nameInput.value ="3" + uid;


var uid3 = "" + snapshot.val().name;

         if (uid == uid2 && nameid == nameid2 && emailid == emailid2){
//alert("all good");
sessionStorage.setItem("uid3", JSON.stringify(uid3));
localStorage.setItem("uid3", JSON.stringify(uid3));
//nameInput.value ="" + uid3;
login();

return;
}         

          alert("only one device allowed");  
hode(); 
return;         
                } else {
               //alert("second login");  
finduid2();
                }
            })
            .catch((error)=>{
                alert(error)
hode(); 
            })
}
            
        }



//CAN ADD USER DATA TO REALTIME DATABASE
  function creatadd() {
       enterID.value =signupnameIn.value;
enterAge.value =signupPasswordIn.value;
enterName.value =signupEmailIn.value;
var oss = getOS();
var bagent = navigator.sayswho;
var stat = "locked";
var loxx = xxxx.YourFuckingLocation;
  set(ref(db, "users/"+ enterID.value),{
                email: enterName.value,
                name: enterID.value,
                pass: enterAge.value,
                uuid: uuid,
                deviceos: oss,
                agent: bagent,
                stat: stat,
                location: loxx,
            })
            .then(()=>{
               // alert("");
var statup = stat;
sessionStorage.setItem("statup", JSON.stringify(statup));
localStorage.setItem("statup", JSON.stringify(statup));
            })
            .catch((error)=>{
                alert(error);
hode(); 
            });
        }


function uidok() {
       enterID.value =signupnameIn.value;
enterAge.value =signupPasswordIn.value;
enterName.value =signupEmailIn.value;
var oss = getOS();
var bagent = navigator.sayswho;
var stat = "locked";
var loxx = xxxx.YourFuckingLocation;
  set(ref(db, "uid/"+ enterID.value),{
                email: enterName.value,
                name: enterID.value,
                pass: enterAge.value,
                 uuid: uuid,
                deviceos: oss,
                agent: bagent,
                location: loxx,
            })
            .then(()=>{
            

            })
            .catch((error)=>{
                alert(error);
hode(); 
            });
        }


function rrr(){



var uidu = JSON.parse(localStorage.getItem("uid3"));
enterID.value = uidu;

alert(uidu);

            remove(ref(db, "uid/"+ enterID.value))
            .then(()=>{
hode(); 
                alert("logged out successfully");
            })
            .catch((error)=>{
                alert(error);
hode(); 
            });
        }




function uidlogin() {
show();
 var uidu = JSON.parse(localStorage.getItem("uid3"));
enterID.value = uidu;
var oss = getOS();
var bagent = navigator.sayswho;
var loggedin = "yes";
var stat = "locked";
var nameid2 = "" + nameInput.value;
var loxx = xxxx.YourFuckingLocation;
//alert (nameid2);

  set(ref(db, "uid/"+ nameid2),{
                email: emailInput.value,
                name: enterID.value,
                loggedin: loggedin,
                 uuid: uuid,
                deviceos: oss,
                agent: bagent,
                stat: stat,
                location: loxx,
            })
            .then(()=>{
               // alert("login added successfully");
hode(); 
var uid3 = "" + enterID.value;
sessionStorage.setItem("uid3", JSON.stringify(uid3));
localStorage.setItem("uid3", JSON.stringify(uid3));
            })
            .catch((error)=>{
                alert(error);
hode(); 
            });
        }



function findstat() {
show();
            const dbref = ref(db);
enterID.value =nameInput.value;

            get(child(dbref, "users/" + enterID.value))
            .then((snapshot)=>{
             if(snapshot.exists()){
                   

var stat = "" + snapshot.val().stat;




         if (stat == "unlocked"){
var statup = "" + stat;
alert("thank you for paying enjoy");
hode(); 



return;
}         

          alert("please pay to unlock all futures");  
hode(); 
return;         
                } else {
             //okkk();       alert("welcome");

                }
            })
            .catch((error)=>{
                alert(error)
hode(); 
            })
            
        }




function finduid2() {
            const dbref = ref(db);
enterID.value =nameInput.value;
var islogin = true;
 
if(emailInput.value == "" || passwordInput.value == "" || nameInput.value == "") {
    window.alert("Please fill out all required fields.");
    islogin = false;
hode(); 
  }

 if(islogin) {
            get(child(dbref, "users/" + enterID.value))
            .then((snapshot)=>{
             if(snapshot.exists()){
                   

var uid = "uid" + snapshot.val().uuid;
var uid2 = "uid" + uuid;
//nameInput.value ="3" + uid;
var nameid = "" + snapshot.val().name;
var nameid2 = "" + nameInput.value;
var emailid = "" + snapshot.val().email;
var emailid2 = "" + emailInput.value;
//nameInput.value ="3" + uid;


var uid3 = "" + snapshot.val().name;

         if (nameid == nameid2 && emailid == emailid2){
sessionStorage.removeItem("uid3", uid3);
localStorage.setItem("uid3", uid3);
//alert("all good");
sessionStorage.setItem("uid3", JSON.stringify(uid3));
localStorage.setItem("uid3", JSON.stringify(uid3));
//nameInput.value ="" + uid3;
login();

return;
}         

          alert("wrong account");  
hode(); 
return;         
                } else {
               alert("no account with this information");  
hode(); 
                }
            })
            .catch((error)=>{
                alert(error)
hode(); 
            })
}
            
        }





const submitButton = document.getElementById("submit");
const signupButton = document.getElementById("sign-up");
const nameInput = document.getElementById("name");
const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");
const main = document.getElementById("main");
const createacct = document.getElementById("create-acct")

const createacctbtn = document.getElementById("create-acct-btn");

//nameInput = /[a-zA-Z]+/;
var signupnameIn = document.querySelector("#name-signup");
var signupEmailIn = document.querySelector("#email-signup");
var confirmSignupEmailIn = document.querySelector("#confirm-email-signup");
var signupPasswordIn = document.querySelector("#password-signup");
var confirmSignUpPasswordIn = document.querySelector("#confirm-password-signup");


const returnBtn = document.getElementById("return-btn");

var name, email, password, signupEmail, signupPassword, confirmSignupEmail, confirmSignUpPassword;

createacctbtn.addEventListener("click", Findb)

function createok(){
 var isVerified = true;

 var signupname = signupnameIn.value; 
var signupEmail = signupEmailIn.value;
 var confirmSignupEmail = confirmSignupEmailIn.value;
  if(signupEmail != confirmSignupEmail) {
      window.alert("Email fields do not match. Try again.")
      isVerified = false;
hode(); 
  }

 var signupPassword = signupPasswordIn.value;
 var confirmSignUpPassword = confirmSignUpPasswordIn.value;
  if(signupPassword != confirmSignUpPassword) {
      window.alert("Password fields do not match. Try again.")
      isVerified = false;
hode(); 
  }
  

  if(signupEmail == "" || confirmSignupEmail == "" || signupPassword == null || confirmSignUpPassword == "" ||signupname == "") {
    window.alert("Please fill out all required fields.");
    isVerified = false;
hode(); 
  }
 
if(signupPassword < 6 || confirmSignUpPassword < 6) {
    window.alert("Password must be more than 6 characters");
    isVerified = false;
hode(); 
  }


  if(isVerified) {
  creatadd();
uidok();
    createUserWithEmailAndPassword(auth, signupEmail, signupPassword)
      .then((userCredential) => {
      // Signed in 
      const user = userCredential.user;
     
sessionStorage.setItem("user", JSON.stringify(user));
localStorage.setItem("user", JSON.stringify(user));
  // ...

      window.alert("Success! Account created.");
hode(); 
//InsertData();

    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
      // ..
      window.alert("Error occurred. Try again.");
hode(); 
    });
  }
};


signupButton.addEventListener("click", function() {
    main.style.display = "none";
    createacct.style.display = "block";
});

submitButton.addEventListener('click', finduid);

returnBtn.addEventListener("click", function() {
    main.style.display = "block";
    createacct.style.display = "none";
});

function login(){
email = emailInput.value;
  console.log(email);
  password = passwordInput.value;
  console.log(password);
 signInWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
      // Signed in
      const user = userCredential.user;
      console.log("Success! Welcome back!");
sessionStorage.setItem("user", JSON.stringify(user));
localStorage.setItem("user", JSON.stringify(user));
hode(); 
      window.alert("Success! Welcome back!");

if (user) {
  // User is signed in, see docs for a list of available properties
   //alert("logedin");
findstat();
uidlogin();
window.location=("../");
  // ...
} else {
  // No user is signed in.
//alert("no");
window.location=("../");
}
      // ...
    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;
      console.log("Error occurred. Try again.");
      window.alert("make sure of the information. Try again.");
hode(); 
    });
};

function logout(){
var uidu = JSON.parse(localStorage.getItem("uid3"));
enterID.value = uidu;
 currentuser = JSON.parse(localStorage.getItem("user"));
if (currentuser !== null){
rrr();

//alert ("logedout")
signOut(auth).then(() => {
  // Sign-out successful.

sessionStorage.removeItem("user", user);
localStorage.setItem("user", user);
//window.location=("/");
return;
}).catch((error) => {
  // An error happened.

});


} else {
alert ("not logged in")
hode(); 
}
}

	


function show(){
var id = '#dialog';

		//Get the screen height and width
		var maskHeight = $(document).height();
		var maskWidth = $(window).width();
	
		//Set heigth and width to mask to fill up the whole screen
		$('#mask').css({'width':maskWidth,'height':maskHeight});
		
		//transition effect		
		$('#mask').fadeIn(500);	
		$('#mask').fadeTo("slow",0.9);	
	
		//Get the window height and width
		var winH = $(window).height();
		var winW = $(window).width();
              
		//Set the popup window to center
		$(id).css('top',  winH/2-$(id).height()/2);
		$(id).css('left', winW/2-$(id).width()/2);
	
		//transition effect
		$(id).fadeIn(2000); 	
	
	$(this).show();
		$('.window').show();
	};		
	//if mask is clicked
	function hode(){
	$('#mask').hide();
		$('.window').hide();
	};		
	
hode();
 </script>
<script src="j.js"></script>
  <script src="script.js"></script>


</html>
